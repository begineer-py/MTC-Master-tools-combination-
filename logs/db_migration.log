2025-02-08 18:15:05,145 - INFO - 開始數據庫遷移流程
2025-02-08 18:15:05,147 - INFO - 數據庫連接測試成功
2025-02-08 18:15:05,147 - INFO - 數據庫已備份到: instance\backups\c2_20250208_181505.db
2025-02-08 18:15:05,147 - INFO - 創建遷移腳本
2025-02-08 18:15:08,403 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-08 18:15:08,404 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:15:12,433 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-08 18:15:12,434 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:15:17,580 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-08 18:15:17,580 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:15:17,580 - ERROR - 遷移過程出錯: 創建遷移腳本失敗: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:15:17,580 - INFO - 嘗試恢復最新備份
2025-02-08 18:15:17,582 - INFO - 已恢復最新備份: instance\backups\c2_20250208_181505.db
2025-02-08 18:15:17,582 - INFO - 成功恢復到最新備份
2025-02-08 18:15:17,582 - ERROR - 數據庫更新失敗
2025-02-08 18:17:00,468 - INFO - 開始數據庫遷移流程
2025-02-08 18:17:00,470 - INFO - 數據庫連接測試成功
2025-02-08 18:17:00,472 - INFO - 數據庫已備份到: instance\backups\c2_20250208_181700.db
2025-02-08 18:17:03,505 - INFO - 創建遷移腳本
2025-02-08 18:17:06,492 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-08 18:17:06,492 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:17:10,426 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-08 18:17:10,426 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:17:15,305 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-08 18:17:15,306 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:17:15,306 - ERROR - 遷移過程出錯: 創建遷移腳本失敗: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
ERROR [flask_migrate] Error: Target database is not up to date.

2025-02-08 18:17:15,306 - INFO - 嘗試恢復最新備份
2025-02-08 18:17:15,308 - INFO - 已恢復最新備份: instance\backups\c2_20250208_181700.db
2025-02-08 18:17:15,309 - INFO - 成功恢復到最新備份
2025-02-08 18:17:15,309 - ERROR - 數據庫更新失敗
2025-02-08 18:18:03,829 - INFO - 開始數據庫遷移流程
2025-02-08 18:18:03,830 - INFO - 數據庫連接測試成功
2025-02-08 18:18:03,831 - INFO - 數據庫已備份到: instance\backups\c2_20250208_181803.db
2025-02-08 18:18:07,077 - INFO - 命令執行成功: flask db current
2025-02-08 18:18:07,077 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-08 18:18:10,377 - INFO - 命令執行成功: flask db stamp head
2025-02-08 18:18:13,440 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-08 18:18:16,797 - INFO - 命令執行成功: flask db upgrade
2025-02-08 18:18:16,798 - INFO - 創建遷移腳本
2025-02-08 18:18:18,962 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-08 18:18:18,962 - INFO - 應用遷移
2025-02-08 18:18:20,979 - INFO - 命令執行成功: flask db upgrade
2025-02-08 18:18:20,979 - INFO - 數據庫遷移完成
2025-02-08 18:18:20,979 - INFO - 數據庫更新成功完成
2025-02-08 20:20:18,183 - INFO - 開始數據庫遷移流程
2025-02-08 20:20:18,184 - INFO - 數據庫連接測試成功
2025-02-08 20:20:18,323 - INFO - 數據庫已備份到: instance\backups\c2_20250208_202018.db
2025-02-08 20:20:20,393 - INFO - 命令執行成功: flask db current
2025-02-08 20:20:20,394 - INFO - 創建遷移腳本
2025-02-08 20:20:22,545 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-08 20:20:22,545 - INFO - 應用遷移
2025-02-08 20:20:24,934 - INFO - 命令執行成功: flask db upgrade
2025-02-08 20:20:24,934 - INFO - 數據庫遷移完成
2025-02-08 20:20:24,934 - INFO - 數據庫更新成功完成
2025-02-09 11:34:39,383 - INFO - 開始數據庫遷移流程
2025-02-09 11:34:39,383 - INFO - 數據庫連接測試成功
2025-02-09 11:34:39,488 - INFO - 數據庫已備份到: instance\backups\c2_20250209_113439.db
2025-02-09 11:34:41,350 - INFO - 命令執行成功: flask db current
2025-02-09 11:34:41,350 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-09 11:34:43,350 - INFO - 命令執行成功: flask db stamp head
2025-02-09 11:34:45,295 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-09 11:34:47,185 - INFO - 命令執行成功: flask db upgrade
2025-02-09 11:34:47,185 - INFO - 創建遷移腳本
2025-02-09 11:34:49,127 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-09 11:34:49,127 - INFO - 應用遷移
2025-02-09 11:34:51,013 - INFO - 命令執行成功: flask db upgrade
2025-02-09 11:34:51,013 - INFO - 數據庫遷移完成
2025-02-09 11:34:51,013 - INFO - 數據庫更新成功完成
2025-02-09 11:37:04,515 - INFO - 開始數據庫遷移流程
2025-02-09 11:37:04,515 - INFO - 數據庫連接測試成功
2025-02-09 11:37:04,615 - INFO - 數據庫已備份到: instance\backups\c2_20250209_113704.db
2025-02-09 11:37:06,626 - INFO - 命令執行成功: flask db current
2025-02-09 11:37:06,627 - INFO - 創建遷移腳本
2025-02-09 11:37:08,576 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-09 11:37:08,576 - INFO - 應用遷移
2025-02-09 11:37:10,484 - INFO - 命令執行成功: flask db upgrade
2025-02-09 11:37:10,484 - INFO - 數據庫遷移完成
2025-02-09 11:37:10,484 - INFO - 數據庫更新成功完成
2025-02-09 12:56:59,170 - INFO - 開始數據庫遷移流程
2025-02-09 12:56:59,170 - INFO - 數據庫連接測試成功
2025-02-09 12:56:59,192 - INFO - 數據庫已備份到: instance\backups\c2_20250209_125659.db
2025-02-09 12:57:01,258 - INFO - 命令執行成功: flask db current
2025-02-09 12:57:01,259 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-09 12:57:03,104 - INFO - 命令執行成功: flask db stamp head
2025-02-09 12:57:05,064 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-09 12:57:06,942 - INFO - 命令執行成功: flask db upgrade
2025-02-09 12:57:06,942 - INFO - 創建遷移腳本
2025-02-09 12:57:08,847 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-09 12:57:08,847 - INFO - 應用遷移
2025-02-09 12:57:10,705 - INFO - 命令執行成功: flask db upgrade
2025-02-09 12:57:10,705 - INFO - 數據庫遷移完成
2025-02-09 12:57:10,706 - INFO - 數據庫更新成功完成
2025-02-09 13:39:34,742 - INFO - 開始數據庫遷移流程
2025-02-09 13:39:34,746 - INFO - 數據庫連接測試成功
2025-02-09 13:39:34,748 - INFO - 數據庫已備份到: instance\backups\c2_20250209_133934.db
2025-02-09 13:41:25,664 - INFO - 命令執行成功: flask db current
2025-02-09 13:41:25,664 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-09 13:42:18,886 - INFO - 命令執行成功: flask db stamp head
2025-02-13 16:23:41,397 - INFO - 開始數據庫遷移流程
2025-02-13 16:23:41,397 - INFO - 數據庫連接測試成功
2025-02-13 16:23:41,529 - INFO - 數據庫已備份到: instance\backups\c2_20250213_162341.db
2025-02-13 16:23:43,464 - INFO - 命令執行成功: flask db current
2025-02-13 16:23:43,465 - INFO - 創建遷移腳本
2025-02-13 16:23:45,507 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-13 16:23:45,507 - INFO - 應用遷移
2025-02-13 16:23:47,724 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-13 16:23:47,724 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 662af39ccb14 -> e18768969344, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\e18768969344_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-13 16:23:50,560 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-13 16:23:50,560 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 662af39ccb14 -> e18768969344, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\e18768969344_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-13 16:23:54,484 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-13 16:23:54,485 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 662af39ccb14 -> e18768969344, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\e18768969344_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-13 16:23:54,486 - ERROR - 遷移過程出錯: 應用遷移失敗: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 662af39ccb14 -> e18768969344, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\e18768969344_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-13 16:23:54,487 - INFO - 嘗試恢復最新備份
2025-02-13 16:23:54,643 - INFO - 已恢復最新備份: instance\backups\c2_20250213_162341.db
2025-02-13 16:23:54,643 - INFO - 成功恢復到最新備份
2025-02-13 16:23:54,643 - ERROR - 數據庫更新失敗
2025-02-13 16:27:21,428 - INFO - 開始數據庫遷移流程
2025-02-13 16:27:21,428 - INFO - 數據庫連接測試成功
2025-02-13 16:27:21,547 - INFO - 數據庫已備份到: instance\backups\c2_20250213_162721.db
2025-02-13 16:27:23,524 - INFO - 命令執行成功: flask db current
2025-02-13 16:27:23,525 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-13 16:27:25,393 - INFO - 命令執行成功: flask db stamp head
2025-02-13 16:27:27,264 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-13 16:27:29,259 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-13 16:27:29,259 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade e18768969344 -> 1ba40399b4d0, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\1ba40399b4d0_reset_migration.py", line 30, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-13 16:27:32,152 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-13 16:27:32,152 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade e18768969344 -> 1ba40399b4d0, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\1ba40399b4d0_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-13 16:27:35,985 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-13 16:27:35,985 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade e18768969344 -> 1ba40399b4d0, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\1ba40399b4d0_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-13 16:27:35,986 - ERROR - 遷移過程出錯: 應用初始遷移失敗
2025-02-13 16:27:35,986 - INFO - 嘗試恢復最新備份
2025-02-13 16:27:36,140 - INFO - 已恢復最新備份: instance\backups\c2_20250213_162721.db
2025-02-13 16:27:36,140 - INFO - 成功恢復到最新備份
2025-02-13 16:27:36,141 - ERROR - 數據庫更新失敗
2025-02-14 18:52:22,499 - INFO - 開始數據庫遷移流程
2025-02-14 18:52:22,499 - INFO - 數據庫連接測試成功
2025-02-14 18:52:22,621 - INFO - 數據庫已備份到: instance\backups\c2_20250214_185222.db
2025-02-14 18:52:22,622 - INFO - 已刪除舊備份: instance\backups\c2_20250208_181505.db
2025-02-14 18:53:08,674 - INFO - 命令執行成功: flask db current
2025-02-14 18:53:08,674 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-14 18:53:51,324 - INFO - 命令執行成功: flask db stamp head
2025-02-14 18:53:53,422 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-14 18:53:55,835 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-14 18:53:55,835 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 1ba40399b4d0 -> a920245aa323, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\a920245aa323_reset_migration.py", line 30, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-14 18:53:59,238 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-14 18:53:59,239 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 1ba40399b4d0 -> a920245aa323, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\a920245aa323_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-14 18:54:03,456 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-14 18:54:03,456 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade 1ba40399b4d0 -> a920245aa323, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\a920245aa323_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-14 18:54:03,456 - ERROR - 遷移過程出錯: 應用初始遷移失敗
2025-02-14 18:54:03,456 - INFO - 嘗試恢復最新備份
2025-02-14 18:54:03,642 - INFO - 已恢復最新備份: instance\backups\c2_20250214_185222.db
2025-02-14 18:54:03,642 - INFO - 成功恢復到最新備份
2025-02-14 18:54:03,643 - ERROR - 數據庫更新失敗
2025-02-14 18:56:11,348 - INFO - 開始數據庫遷移流程
2025-02-14 18:56:11,348 - INFO - 數據庫連接測試成功
2025-02-14 18:56:11,440 - INFO - 數據庫已備份到: instance\backups\c2_20250214_185611.db
2025-02-14 18:56:11,441 - INFO - 已刪除舊備份: instance\backups\c2_20250208_181700.db
2025-02-14 18:56:13,316 - INFO - 命令執行成功: flask db current
2025-02-14 18:56:13,317 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-14 18:56:15,190 - INFO - 命令執行成功: flask db stamp head
2025-02-14 18:56:17,099 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-14 18:56:19,161 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-14 18:56:19,161 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade a920245aa323 -> ff4f695ab10d, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\ff4f695ab10d_reset_migration.py", line 30, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-14 18:56:22,037 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-14 18:56:22,038 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade a920245aa323 -> ff4f695ab10d, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\ff4f695ab10d_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-14 18:56:25,893 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-14 18:56:25,893 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade a920245aa323 -> ff4f695ab10d, Reset migration
Traceback (most recent call last):
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table change_urls_into_payloads already exists

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\ff4f695ab10d_reset_migration.py", line 21, in upgrade
    op.create_table('change_urls_into_payloads',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\ops.py", line 1311, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 442, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\toimpl.py", line 131, in create_table
    operations.impl.create_table(table)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 369, in create_table
    self._exec(schema.CreateTable(table))
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\ddl\impl.py", line 210, in _exec
    return conn.execute(construct, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\sql\ddl.py", line 180, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1529, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table change_urls_into_payloads already exists
[SQL: 
CREATE TABLE change_urls_into_payloads (
	id INTEGER NOT NULL, 
	url VARCHAR(255) NOT NULL, 
	payload VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	target_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(target_id) REFERENCES target (id)
)

]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

2025-02-14 18:56:25,894 - ERROR - 遷移過程出錯: 應用初始遷移失敗
2025-02-14 18:56:25,894 - INFO - 嘗試恢復最新備份
2025-02-14 18:56:26,039 - INFO - 已恢復最新備份: instance\backups\c2_20250214_185611.db
2025-02-14 18:56:26,039 - INFO - 成功恢復到最新備份
2025-02-14 18:56:26,039 - ERROR - 數據庫更新失敗
2025-02-15 15:35:19,160 - INFO - 開始數據庫遷移流程
2025-02-15 15:35:19,160 - INFO - 數據庫連接測試成功
2025-02-15 15:35:19,162 - INFO - 數據庫已備份到: instance\backups\c2_20250215_153519.db
2025-02-15 15:35:19,162 - INFO - 已刪除舊備份: instance\backups\c2_20250208_181803.db
2025-02-15 15:35:21,485 - INFO - 命令執行成功: flask db current
2025-02-15 15:35:21,485 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-15 15:35:23,407 - INFO - 命令執行成功: flask db stamp head
2025-02-15 15:35:25,342 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-15 15:35:27,468 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-15 15:35:27,468 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade ff4f695ab10d -> 88d820003a67, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\88d820003a67_reset_migration.py", line 21, in upgrade
    with op.batch_alter_table('nmap_result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 15:35:30,403 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-15 15:35:30,403 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade ff4f695ab10d -> 88d820003a67, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\88d820003a67_reset_migration.py", line 21, in upgrade
    with op.batch_alter_table('nmap_result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 15:35:34,375 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-15 15:35:34,375 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade ff4f695ab10d -> 88d820003a67, Reset migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\88d820003a67_reset_migration.py", line 21, in upgrade
    with op.batch_alter_table('nmap_result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 15:35:34,376 - ERROR - 遷移過程出錯: 應用初始遷移失敗
2025-02-15 15:35:34,376 - INFO - 嘗試恢復最新備份
2025-02-15 15:35:34,377 - INFO - 已恢復最新備份: instance\backups\c2_20250215_153519.db
2025-02-15 15:35:34,377 - INFO - 成功恢復到最新備份
2025-02-15 15:35:34,378 - ERROR - 數據庫更新失敗
2025-02-15 15:37:01,355 - INFO - 開始數據庫遷移流程
2025-02-15 15:37:01,360 - INFO - 數據庫連接測試成功
2025-02-15 15:37:01,360 - INFO - 數據庫已備份到: instance\backups\c2_20250215_153701.db
2025-02-15 15:37:01,360 - INFO - 已刪除舊備份: instance\backups\c2_20250208_202018.db
2025-02-15 15:37:03,362 - INFO - 命令執行成功: flask db current
2025-02-15 15:37:03,362 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-15 15:37:05,393 - INFO - 命令執行成功: flask db stamp head
2025-02-15 15:37:07,355 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-15 15:37:09,459 - INFO - 命令執行成功: flask db upgrade
2025-02-15 15:37:09,459 - INFO - 創建遷移腳本
2025-02-15 15:37:11,449 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-15 15:37:11,449 - INFO - 應用遷移
2025-02-15 15:37:13,400 - INFO - 命令執行成功: flask db upgrade
2025-02-15 15:37:13,400 - INFO - 數據庫遷移完成
2025-02-15 15:37:13,401 - INFO - 數據庫更新成功完成
2025-02-15 16:55:05,367 - INFO - 開始數據庫遷移流程
2025-02-15 16:55:05,373 - INFO - 數據庫連接測試成功
2025-02-15 16:55:05,373 - INFO - 數據庫已備份到: instance\backups\c2_20250215_165505.db
2025-02-15 16:55:05,373 - INFO - 已刪除舊備份: instance\backups\c2_20250209_113439.db
2025-02-15 16:55:07,412 - INFO - 命令執行成功: flask db current
2025-02-15 16:55:07,412 - INFO - 創建遷移腳本
2025-02-15 16:55:09,437 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-15 16:55:09,437 - INFO - 應用遷移
2025-02-15 16:55:11,423 - INFO - 命令執行成功: flask db upgrade
2025-02-15 16:55:11,423 - INFO - 數據庫遷移完成
2025-02-15 16:55:11,424 - INFO - 數據庫更新成功完成
2025-02-15 22:43:28,837 - INFO - 開始數據庫遷移流程
2025-02-15 22:43:28,837 - INFO - 數據庫連接測試成功
2025-02-15 22:43:28,838 - INFO - 數據庫已備份到: instance\backups\c2_20250215_224328.db
2025-02-15 22:43:28,839 - INFO - 已刪除舊備份: instance\backups\c2_20250209_113704.db
2025-02-15 22:43:30,798 - INFO - 命令執行成功: flask db current
2025-02-15 22:43:30,798 - INFO - 創建遷移腳本
2025-02-15 22:43:32,735 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-15 22:43:32,735 - INFO - 應用遷移
2025-02-15 22:43:34,789 - INFO - 命令執行成功: flask db upgrade
2025-02-15 22:43:34,789 - INFO - 數據庫遷移完成
2025-02-15 22:43:34,790 - INFO - 數據庫更新成功完成
2025-02-15 23:07:44,493 - INFO - 開始數據庫遷移流程
2025-02-15 23:07:44,493 - INFO - 數據庫連接測試成功
2025-02-15 23:07:44,493 - INFO - 數據庫已備份到: instance\backups\c2_20250215_230744.db
2025-02-15 23:07:44,493 - INFO - 已刪除舊備份: instance\backups\c2_20250209_125659.db
2025-02-15 23:07:46,493 - INFO - 命令執行成功: flask db current
2025-02-15 23:07:46,493 - INFO - 創建遷移腳本
2025-02-15 23:07:48,481 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-15 23:07:48,481 - INFO - 應用遷移
2025-02-15 23:07:50,776 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-15 23:07:50,776 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d13aa2c63d48 -> 3ee42d88d0ad, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\3ee42d88d0ad_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('webtech__result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 681, in drop_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 23:07:53,702 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-15 23:07:53,702 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d13aa2c63d48 -> 3ee42d88d0ad, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\3ee42d88d0ad_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('webtech__result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 681, in drop_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 23:07:57,723 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-15 23:07:57,723 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d13aa2c63d48 -> 3ee42d88d0ad, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\3ee42d88d0ad_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('webtech__result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 681, in drop_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 23:07:57,724 - ERROR - 遷移過程出錯: 應用遷移失敗: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d13aa2c63d48 -> 3ee42d88d0ad, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\3ee42d88d0ad_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('webtech__result', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 681, in drop_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-15 23:07:57,725 - INFO - 嘗試恢復最新備份
2025-02-15 23:07:57,727 - INFO - 已恢復最新備份: instance\backups\c2_20250215_230744.db
2025-02-15 23:07:57,727 - INFO - 成功恢復到最新備份
2025-02-15 23:07:57,727 - ERROR - 數據庫更新失敗
2025-02-15 23:27:04,140 - INFO - 開始數據庫遷移流程
2025-02-15 23:27:04,140 - INFO - 數據庫連接測試成功
2025-02-15 23:27:04,141 - INFO - 數據庫已備份到: instance\backups\c2_20250215_232704.db
2025-02-15 23:27:04,141 - INFO - 已刪除舊備份: instance\backups\c2_20250209_133934.db
2025-02-15 23:27:06,446 - INFO - 命令執行成功: flask db current
2025-02-15 23:27:06,446 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-15 23:27:08,418 - INFO - 命令執行成功: flask db stamp head
2025-02-15 23:27:10,477 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-15 23:27:12,498 - INFO - 命令執行成功: flask db upgrade
2025-02-15 23:27:12,498 - INFO - 創建遷移腳本
2025-02-15 23:27:14,743 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-15 23:27:14,743 - INFO - 應用遷移
2025-02-15 23:27:16,946 - INFO - 命令執行成功: flask db upgrade
2025-02-15 23:27:16,946 - INFO - 數據庫遷移完成
2025-02-15 23:27:16,946 - INFO - 數據庫更新成功完成
2025-02-16 16:44:30,577 - INFO - 開始數據庫遷移流程
2025-02-16 16:44:30,577 - INFO - 數據庫連接測試成功
2025-02-16 16:44:30,577 - INFO - 數據庫已備份到: instance\backups\c2_20250216_164430.db
2025-02-16 16:44:30,579 - INFO - 已刪除舊備份: instance\backups\c2_20250213_162341.db
2025-02-16 16:44:32,766 - INFO - 命令執行成功: flask db current
2025-02-16 16:44:32,766 - INFO - 創建遷移腳本
2025-02-16 16:44:34,682 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 16:44:34,682 - INFO - 應用遷移
2025-02-16 16:44:36,779 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-16 16:44:36,779 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d248cc571c10 -> 471892a45c21, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\471892a45c21_auto_migration.py", line 24, in upgrade
    with op.batch_alter_table('user', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 669, in add_constraint
    raise ValueError("Constraint must have a name")
ValueError: Constraint must have a name

2025-02-16 16:44:39,789 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-16 16:44:39,789 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d248cc571c10 -> 471892a45c21, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\471892a45c21_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 631, in drop_column
    del self.columns[column.name]
        ~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'api_key'

2025-02-16 16:44:43,787 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-16 16:44:43,788 - WARNING - 錯誤信息: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d248cc571c10 -> 471892a45c21, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\471892a45c21_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 631, in drop_column
    del self.columns[column.name]
        ~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'api_key'

2025-02-16 16:44:43,788 - ERROR - 遷移過程出錯: 應用遷移失敗: INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade d248cc571c10 -> 471892a45c21, Auto migration
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 388, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 783, in invoke
    return __callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\cli.py", line 154, in upgrade
    _upgrade(directory, revision, sql, tag, x_arg)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 111, in wrapped
    f(*args, **kwargs)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask_migrate\__init__.py", line 200, in upgrade
    command.upgrade(config, revision, sql=sql, tag=tag)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\command.py", line 406, in upgrade
    script.run_env()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\script\base.py", line 582, in run_env
    util.load_python_file(self.dir, "env.py")
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 95, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\util\pyfiles.py", line 113, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 113, in <module>
    run_migrations_online()
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\env.py", line 107, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\runtime\migration.py", line 628, in run_migrations
    step.migration_fn(**kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\migrations\versions\471892a45c21_auto_migration.py", line 21, in upgrade
    with op.batch_alter_table('target', schema=None) as batch_op:
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\base.py", line 398, in batch_alter_table
    impl.flush()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 162, in flush
    fn(*arg, **kw)
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\alembic\operations\batch.py", line 631, in drop_column
    del self.columns[column.name]
        ~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'api_key'

2025-02-16 16:44:43,788 - INFO - 嘗試恢復最新備份
2025-02-16 16:44:43,788 - INFO - 已恢復最新備份: instance\backups\c2_20250216_164430.db
2025-02-16 16:44:43,788 - INFO - 成功恢復到最新備份
2025-02-16 16:44:43,788 - ERROR - 數據庫更新失敗
2025-02-16 19:03:52,053 - INFO - 開始數據庫遷移流程
2025-02-16 19:03:52,054 - INFO - 數據庫連接測試成功
2025-02-16 19:03:52,056 - INFO - 數據庫已備份到: instance\backups\c2_20250216_190352.db
2025-02-16 19:03:52,057 - INFO - 已刪除舊備份: instance\backups\c2_20250213_162721.db
2025-02-16 19:03:55,369 - INFO - 命令執行成功: flask db current
2025-02-16 19:03:55,369 - INFO - 創建遷移腳本
2025-02-16 19:05:36,003 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 19:05:36,003 - INFO - 應用遷移
2025-02-16 19:06:24,353 - INFO - 開始數據庫遷移流程
2025-02-16 19:06:24,353 - INFO - 數據庫連接測試成功
2025-02-16 19:06:24,353 - INFO - 數據庫已備份到: instance\backups\c2_20250216_190624.db
2025-02-16 19:06:24,353 - INFO - 已刪除舊備份: instance\backups\c2_20250214_185222.db
2025-02-16 19:06:54,671 - INFO - 命令執行成功: flask db current
2025-02-16 19:06:54,673 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-16 19:06:56,777 - INFO - 命令執行成功: flask db stamp head
2025-02-16 19:06:59,495 - INFO - 命令執行成功: flask db migrate -m "Reset migration"
2025-02-16 19:07:01,877 - INFO - 命令執行成功: flask db upgrade
2025-02-16 19:07:01,877 - INFO - 創建遷移腳本
2025-02-16 19:07:04,130 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 19:07:04,130 - INFO - 應用遷移
2025-02-16 19:07:06,076 - INFO - 命令執行成功: flask db upgrade
2025-02-16 19:07:06,076 - INFO - 數據庫遷移完成
2025-02-16 19:07:06,076 - INFO - 數據庫更新成功完成
2025-02-16 19:07:43,659 - INFO - 開始數據庫遷移流程
2025-02-16 19:07:43,659 - INFO - 數據庫連接測試成功
2025-02-16 19:07:43,659 - INFO - 數據庫已備份到: instance\backups\c2_20250216_190743.db
2025-02-16 19:07:43,659 - INFO - 已刪除舊備份: instance\backups\c2_20250214_185611.db
2025-02-16 19:07:45,491 - INFO - 命令執行成功: flask db current
2025-02-16 19:07:45,491 - INFO - 創建遷移腳本
2025-02-16 19:07:47,483 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 19:07:47,483 - INFO - 應用遷移
2025-02-16 19:07:49,571 - INFO - 命令執行成功: flask db upgrade
2025-02-16 19:07:49,572 - INFO - 數據庫遷移完成
2025-02-16 19:07:49,572 - INFO - 數據庫更新成功完成
2025-02-16 19:07:50,465 - INFO - 開始數據庫遷移流程
2025-02-16 19:07:50,465 - INFO - 數據庫連接測試成功
2025-02-16 19:07:50,466 - INFO - 數據庫已備份到: instance\backups\c2_20250216_190750.db
2025-02-16 19:07:50,467 - INFO - 已刪除舊備份: instance\backups\c2_20250215_153519.db
2025-02-16 19:07:52,271 - INFO - 命令執行成功: flask db current
2025-02-16 19:07:52,272 - INFO - 創建遷移腳本
2025-02-16 19:07:54,191 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 19:07:54,191 - INFO - 應用遷移
2025-02-16 19:07:56,179 - INFO - 命令執行成功: flask db upgrade
2025-02-16 19:07:56,180 - INFO - 數據庫遷移完成
2025-02-16 19:07:56,180 - INFO - 數據庫更新成功完成
2025-02-16 20:17:08,468 - INFO - 開始數據庫遷移流程
2025-02-16 20:17:08,468 - INFO - 數據庫連接測試成功
2025-02-16 20:17:08,469 - INFO - 數據庫已備份到: instance\backups\c2_20250216_201708.db
2025-02-16 20:17:08,470 - INFO - 已刪除舊備份: instance\backups\c2_20250215_153701.db
2025-02-16 20:17:11,050 - INFO - 命令執行成功: flask db current
2025-02-16 20:17:11,050 - INFO - 創建遷移腳本
2025-02-16 20:17:13,589 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-16 20:17:13,589 - INFO - 應用遷移
2025-02-16 20:17:16,259 - INFO - 命令執行成功: flask db upgrade
2025-02-16 20:17:16,259 - INFO - 數據庫遷移完成
2025-02-16 20:17:16,260 - INFO - 數據庫更新成功完成
2025-02-27 23:29:37,289 - INFO - 開始數據庫遷移流程
2025-02-27 23:29:37,289 - INFO - 數據庫連接測試成功
2025-02-27 23:29:37,289 - INFO - 數據庫已備份到: instance\backups\c2_20250227_232937.db
2025-02-27 23:29:37,289 - INFO - 已刪除舊備份: instance\backups\c2_20250215_165505.db
2025-02-27 23:29:38,290 - INFO - 命令執行成功: flask db current
2025-02-27 23:29:38,290 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-27 23:29:39,135 - INFO - 命令執行成功: flask db stamp head
2025-02-27 23:29:39,956 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-27 23:29:39,956 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:29:41,803 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-27 23:29:41,803 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:29:44,651 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-27 23:29:44,651 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:29:44,651 - ERROR - 遷移過程出錯: 重新初始化遷移失敗
2025-02-27 23:29:44,651 - INFO - 嘗試恢復最新備份
2025-02-27 23:29:44,651 - INFO - 已恢復最新備份: instance\backups\c2_20250227_232937.db
2025-02-27 23:29:44,651 - INFO - 成功恢復到最新備份
2025-02-27 23:29:44,651 - ERROR - 數據庫更新失敗
2025-02-27 23:30:20,120 - INFO - 開始數據庫遷移流程
2025-02-27 23:30:20,120 - INFO - 數據庫連接測試成功
2025-02-27 23:30:20,120 - INFO - 數據庫已備份到: instance\backups\c2_20250227_233020.db
2025-02-27 23:30:20,120 - INFO - 已刪除舊備份: instance\backups\c2_20250215_224328.db
2025-02-27 23:30:20,989 - INFO - 命令執行成功: flask db current
2025-02-27 23:30:20,989 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-27 23:30:21,880 - INFO - 命令執行成功: flask db stamp head
2025-02-27 23:30:22,724 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-27 23:30:22,725 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:30:24,619 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-27 23:30:24,619 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.harvester_route import harvester_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\harvester_route.py", line 3, in <module>
    from instance.models import Target, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:30:27,532 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-27 23:30:27,533 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.harvester_route import harvester_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\harvester_route.py", line 3, in <module>
    from instance.models import Target, HarvesterResult
ImportError: cannot import name 'HarvesterResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py)

2025-02-27 23:30:27,533 - ERROR - 遷移過程出錯: 重新初始化遷移失敗
2025-02-27 23:30:27,533 - INFO - 嘗試恢復最新備份
2025-02-27 23:30:27,535 - INFO - 已恢復最新備份: instance\backups\c2_20250227_233020.db
2025-02-27 23:30:27,535 - INFO - 成功恢復到最新備份
2025-02-27 23:30:27,535 - ERROR - 數據庫更新失敗
2025-02-27 23:31:17,675 - INFO - 開始數據庫遷移流程
2025-02-27 23:31:17,675 - INFO - 數據庫連接測試成功
2025-02-27 23:31:17,675 - INFO - 數據庫已備份到: instance\backups\c2_20250227_233117.db
2025-02-27 23:31:17,675 - INFO - 已刪除舊備份: instance\backups\c2_20250215_230744.db
2025-02-27 23:31:18,577 - INFO - 命令執行成功: flask db current
2025-02-27 23:31:18,577 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-27 23:31:19,470 - INFO - 命令執行成功: flask db stamp head
2025-02-27 23:31:20,278 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-27 23:31:20,278 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.harvester_route import harvester_route
ModuleNotFoundError: No module named 'routes.reconnaissance_route.harvester_route'

2025-02-27 23:31:22,174 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-27 23:31:22,174 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.harvester_route import harvester_route
ModuleNotFoundError: No module named 'routes.reconnaissance_route.harvester_route'

2025-02-27 23:31:25,016 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-27 23:31:25,016 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.harvester_route import harvester_route
ModuleNotFoundError: No module named 'routes.reconnaissance_route.harvester_route'

2025-02-27 23:31:25,016 - ERROR - 遷移過程出錯: 重新初始化遷移失敗
2025-02-27 23:31:25,016 - INFO - 嘗試恢復最新備份
2025-02-27 23:31:25,018 - INFO - 已恢復最新備份: instance\backups\c2_20250227_233117.db
2025-02-27 23:31:25,018 - INFO - 成功恢復到最新備份
2025-02-27 23:31:25,018 - ERROR - 數據庫更新失敗
2025-02-27 23:31:31,554 - INFO - 開始數據庫遷移流程
2025-02-27 23:31:31,554 - INFO - 數據庫連接測試成功
2025-02-27 23:31:31,569 - INFO - 數據庫已備份到: instance\backups\c2_20250227_233131.db
2025-02-27 23:31:31,569 - INFO - 已刪除舊備份: instance\backups\c2_20250215_232704.db
2025-02-27 23:31:32,477 - INFO - 命令執行成功: flask db current
2025-02-27 23:31:32,477 - INFO - 創建遷移腳本
2025-02-27 23:31:33,438 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-27 23:31:33,438 - INFO - 應用遷移
2025-02-27 23:31:34,358 - INFO - 命令執行成功: flask db upgrade
2025-02-27 23:31:34,358 - INFO - 數據庫遷移完成
2025-02-27 23:31:34,358 - INFO - 數據庫更新成功完成
2025-02-27 23:45:13,444 - INFO - 開始數據庫遷移流程
2025-02-27 23:45:13,444 - INFO - 數據庫連接測試成功
2025-02-27 23:45:13,444 - INFO - 數據庫已備份到: instance\backups\c2_20250227_234513.db
2025-02-27 23:45:13,444 - INFO - 已刪除舊備份: instance\backups\c2_20250216_164430.db
2025-02-27 23:45:14,340 - INFO - 命令執行成功: flask db current
2025-02-27 23:45:14,340 - INFO - 創建遷移腳本
2025-02-27 23:45:15,234 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-27 23:45:15,234 - INFO - 應用遷移
2025-02-27 23:45:16,154 - INFO - 命令執行成功: flask db upgrade
2025-02-27 23:45:16,154 - INFO - 數據庫遷移完成
2025-02-27 23:45:16,154 - INFO - 數據庫更新成功完成
2025-02-27 23:49:30,441 - INFO - 開始數據庫遷移流程
2025-02-27 23:49:30,441 - INFO - 數據庫連接測試成功
2025-02-27 23:49:30,443 - INFO - 數據庫已備份到: instance\backups\c2_20250227_234930.db
2025-02-27 23:49:30,444 - INFO - 已刪除舊備份: instance\backups\c2_20250216_190352.db
2025-02-27 23:49:31,392 - INFO - 命令執行成功: flask db current
2025-02-27 23:49:31,392 - INFO - 創建遷移腳本
2025-02-27 23:49:32,380 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-27 23:49:32,380 - INFO - 應用遷移
2025-02-27 23:49:33,365 - INFO - 命令執行成功: flask db upgrade
2025-02-27 23:49:33,365 - INFO - 數據庫遷移完成
2025-02-27 23:49:33,365 - INFO - 數據庫更新成功完成
2025-02-27 23:50:17,558 - INFO - 開始數據庫遷移流程
2025-02-27 23:50:17,558 - INFO - 數據庫連接測試成功
2025-02-27 23:50:17,558 - INFO - 數據庫已備份到: instance\backups\c2_20250227_235017.db
2025-02-27 23:50:17,558 - INFO - 已刪除舊備份: instance\backups\c2_20250216_190624.db
2025-02-27 23:50:18,492 - INFO - 命令執行成功: flask db current
2025-02-27 23:50:18,492 - INFO - 創建遷移腳本
2025-02-27 23:50:19,473 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-27 23:50:19,473 - INFO - 應用遷移
2025-02-27 23:50:20,356 - INFO - 命令執行成功: flask db upgrade
2025-02-27 23:50:20,356 - INFO - 數據庫遷移完成
2025-02-27 23:50:20,356 - INFO - 數據庫更新成功完成
2025-02-28 00:22:02,773 - INFO - 開始數據庫遷移流程
2025-02-28 00:22:02,773 - INFO - 數據庫連接測試成功
2025-02-28 00:22:02,773 - INFO - 數據庫已備份到: instance\backups\c2_20250228_002202.db
2025-02-28 00:22:02,781 - INFO - 已刪除舊備份: instance\backups\c2_20250216_190743.db
2025-02-28 00:22:03,684 - INFO - 命令執行成功: flask db current
2025-02-28 00:22:03,684 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-28 00:22:04,603 - INFO - 命令執行成功: flask db stamp head
2025-02-28 00:22:05,429 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-28 00:22:05,429 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db,paramspider_result
ImportError: cannot import name 'paramspider_result' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'ParamSpiderResult'?

2025-02-28 00:22:07,317 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-28 00:22:07,317 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db,paramspider_result
ImportError: cannot import name 'paramspider_result' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'ParamSpiderResult'?

2025-02-28 00:22:10,217 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-28 00:22:10,217 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db,paramspider_result
ImportError: cannot import name 'paramspider_result' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'ParamSpiderResult'?

2025-02-28 00:22:10,217 - ERROR - 遷移過程出錯: 重新初始化遷移失敗
2025-02-28 00:22:10,217 - INFO - 嘗試恢復最新備份
2025-02-28 00:22:10,217 - INFO - 已恢復最新備份: instance\backups\c2_20250228_002202.db
2025-02-28 00:22:10,217 - INFO - 成功恢復到最新備份
2025-02-28 00:22:10,217 - ERROR - 數據庫更新失敗
2025-02-28 00:22:27,328 - INFO - 開始數據庫遷移流程
2025-02-28 00:22:27,343 - INFO - 數據庫連接測試成功
2025-02-28 00:22:27,344 - INFO - 數據庫已備份到: instance\backups\c2_20250228_002227.db
2025-02-28 00:22:27,346 - INFO - 已刪除舊備份: instance\backups\c2_20250216_190750.db
2025-02-28 00:22:28,248 - INFO - 命令執行成功: flask db current
2025-02-28 00:22:28,248 - INFO - 創建遷移腳本
2025-02-28 00:22:29,185 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-28 00:22:29,185 - INFO - 應用遷移
2025-02-28 00:22:30,159 - INFO - 命令執行成功: flask db upgrade
2025-02-28 00:22:30,159 - INFO - 數據庫遷移完成
2025-02-28 00:22:30,159 - INFO - 數據庫更新成功完成
2025-02-28 20:16:35,305 - INFO - 開始數據庫遷移流程
2025-02-28 20:16:35,306 - INFO - 數據庫連接測試成功
2025-02-28 20:16:35,308 - INFO - 數據庫已備份到: instance\backups\c2_20250228_201635.db
2025-02-28 20:16:35,308 - INFO - 已刪除舊備份: instance\backups\c2_20250216_201708.db
2025-02-28 20:16:36,526 - INFO - 命令執行成功: flask db current
2025-02-28 20:16:36,526 - INFO - 創建遷移腳本
2025-02-28 20:16:37,432 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-28 20:16:37,432 - INFO - 應用遷移
2025-02-28 20:16:38,275 - INFO - 命令執行成功: flask db upgrade
2025-02-28 20:16:38,275 - INFO - 數據庫遷移完成
2025-02-28 20:16:38,275 - INFO - 數據庫更新成功完成
2025-02-28 20:21:44,539 - INFO - 開始數據庫遷移流程
2025-02-28 20:21:44,539 - INFO - 數據庫連接測試成功
2025-02-28 20:21:44,539 - INFO - 數據庫已備份到: instance\backups\c2_20250228_202144.db
2025-02-28 20:21:44,543 - INFO - 已刪除舊備份: instance\backups\c2_20250227_232937.db
2025-02-28 20:21:45,433 - INFO - 命令執行成功: flask db current
2025-02-28 20:21:45,434 - INFO - 創建遷移腳本
2025-02-28 20:21:46,372 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-28 20:21:46,372 - INFO - 應用遷移
2025-02-28 20:21:47,280 - INFO - 命令執行成功: flask db upgrade
2025-02-28 20:21:47,280 - INFO - 數據庫遷移完成
2025-02-28 20:21:47,280 - INFO - 數據庫更新成功完成
2025-02-28 20:22:41,338 - INFO - 開始數據庫遷移流程
2025-02-28 20:22:41,338 - INFO - 數據庫連接測試成功
2025-02-28 20:22:41,338 - INFO - 數據庫已備份到: instance\backups\c2_20250228_202241.db
2025-02-28 20:22:41,338 - INFO - 已刪除舊備份: instance\backups\c2_20250227_233020.db
2025-02-28 20:22:42,264 - INFO - 命令執行成功: flask db current
2025-02-28 20:22:42,264 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-28 20:22:43,107 - INFO - 命令執行成功: flask db stamp head
2025-02-28 20:22:43,940 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-28 20:22:43,940 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db,ParamSpiderResult
ImportError: cannot import name 'ParamSpiderResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'paramspider_results'?

2025-02-28 20:22:45,787 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-28 20:22:45,787 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 14, in <module>
    from routes.reconnaissance_route.flaresolverr_route import flaresolverr_route
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\flaresolverr_route.py", line 7, in <module>
    from reconnaissance.scanner_flaresolverr.run_cloudflare_pass import CloudflareHarvester
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\reconnaissance\scanner_flaresolverr\run_cloudflare_pass.py", line 6, in <module>
    from instance.models import db,ParamSpiderResult
ImportError: cannot import name 'ParamSpiderResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'paramspider_results'?

2025-02-28 20:23:33,793 - INFO - 開始數據庫遷移流程
2025-02-28 20:23:33,793 - INFO - 數據庫連接測試成功
2025-02-28 20:23:33,793 - INFO - 數據庫已備份到: instance\backups\c2_20250228_202333.db
2025-02-28 20:23:33,793 - INFO - 已刪除舊備份: instance\backups\c2_20250227_233117.db
2025-02-28 20:23:34,658 - INFO - 命令執行成功: flask db current
2025-02-28 20:23:34,658 - WARNING - 數據庫版本不是最新的，執行強制更新
2025-02-28 20:23:35,502 - INFO - 命令執行成功: flask db stamp head
2025-02-28 20:23:36,361 - WARNING - 命令執行失敗 (嘗試 1/3)
2025-02-28 20:23:36,361 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.paramspider_route import paramspider_blueprint
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\paramspider_route.py", line 10, in <module>
    from instance.models import db, Target, db_lock, ParamSpiderResult
ImportError: cannot import name 'ParamSpiderResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'paramspider_results'?

2025-02-28 20:23:38,230 - WARNING - 命令執行失敗 (嘗試 2/3)
2025-02-28 20:23:38,230 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.paramspider_route import paramspider_blueprint
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\paramspider_route.py", line 10, in <module>
    from instance.models import db, Target, db_lock, ParamSpiderResult
ImportError: cannot import name 'ParamSpiderResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'paramspider_results'?

2025-02-28 20:23:41,130 - WARNING - 命令執行失敗 (嘗試 3/3)
2025-02-28 20:23:41,130 - WARNING - 錯誤信息: Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Scripts\flask.exe\__main__.py", line 7, in <module>
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 1107, in main
    cli.main()
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1078, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1682, in invoke
    cmd_name, cmd, args = self.resolve_command(ctx, args)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\click\core.py", line 1729, in resolve_command
    cmd = self.get_command(ctx, cmd_name)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 613, in get_command
    app = info.load_app()
          ^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 341, in load_app
    app = locate_app(import_name, None, raise_if_not_found=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 264, in locate_app
    return find_best_app(module)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\AppData\Local\Programs\Python\Python312\Lib\site-packages\flask\cli.py", line 72, in find_best_app
    app = app_factory()
          ^^^^^^^^^^^^^
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\__init__.py", line 10, in create_app
    from .app import create_app as _create_app
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\app.py", line 13, in <module>
    from app.blueprint_set import register_blueprints
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\app\blueprint_set.py", line 15, in <module>
    from routes.reconnaissance_route.paramspider_route import paramspider_blueprint
  File "C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\routes\reconnaissance_route\paramspider_route.py", line 10, in <module>
    from instance.models import db, Target, db_lock, ParamSpiderResult
ImportError: cannot import name 'ParamSpiderResult' from 'instance.models' (C:\Users\User.DESKTOP-AQD9BKJ\Desktop\C2\instance\models.py). Did you mean: 'paramspider_results'?

2025-02-28 20:23:41,130 - ERROR - 遷移過程出錯: 重新初始化遷移失敗
2025-02-28 20:23:41,130 - INFO - 嘗試恢復最新備份
2025-02-28 20:23:41,132 - INFO - 已恢復最新備份: instance\backups\c2_20250228_202333.db
2025-02-28 20:23:41,133 - INFO - 成功恢復到最新備份
2025-02-28 20:23:41,133 - ERROR - 數據庫更新失敗
2025-02-28 20:24:17,150 - INFO - 開始數據庫遷移流程
2025-02-28 20:24:17,152 - INFO - 數據庫連接測試成功
2025-02-28 20:24:17,152 - INFO - 數據庫已備份到: instance\backups\c2_20250228_202417.db
2025-02-28 20:24:17,152 - INFO - 已刪除舊備份: instance\backups\c2_20250227_233131.db
2025-02-28 20:24:18,038 - INFO - 命令執行成功: flask db current
2025-02-28 20:24:18,038 - INFO - 創建遷移腳本
2025-02-28 20:24:18,952 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-28 20:24:18,952 - INFO - 應用遷移
2025-02-28 20:24:19,895 - INFO - 命令執行成功: flask db upgrade
2025-02-28 20:24:19,895 - INFO - 數據庫遷移完成
2025-02-28 20:24:19,895 - INFO - 數據庫更新成功完成
2025-02-28 20:24:56,338 - INFO - 開始數據庫遷移流程
2025-02-28 20:24:56,338 - INFO - 數據庫連接測試成功
2025-02-28 20:24:56,338 - INFO - 數據庫已備份到: instance\backups\c2_20250228_202456.db
2025-02-28 20:24:56,338 - INFO - 已刪除舊備份: instance\backups\c2_20250227_234513.db
2025-02-28 20:24:57,259 - INFO - 命令執行成功: flask db current
2025-02-28 20:24:57,259 - INFO - 創建遷移腳本
2025-02-28 20:24:58,234 - INFO - 命令執行成功: flask db migrate -m "Auto migration"
2025-02-28 20:24:58,234 - INFO - 應用遷移
2025-02-28 20:24:59,207 - INFO - 命令執行成功: flask db upgrade
2025-02-28 20:24:59,207 - INFO - 數據庫遷移完成
2025-02-28 20:24:59,207 - INFO - 數據庫更新成功完成
