# HTTP代理攔截器 - 類似Burp Suite

一款功能強大的HTTP代理攔截工具，提供類似Burp Suite的GUI界面，用於捕捉、分析和重放HTTP請求。

## 🚀 主要功能

- **HTTP代理服務器**: 監聽9487端口，攔截所有通過的HTTP請求
- **🌐 內建瀏覽器**: 類似Burp Suite的內建瀏覽器，自動配置代理
- **實時請求顯示**: 美觀的GUI界面實時展示攔截到的請求
- **請求詳情分析**: 詳細解析請求方法、URL、Headers、Body等信息
- **請求編輯功能**: 支持修改請求內容並重新發送
- **請求重放**: 完整的請求重放功能，顯示響應結果
- **日誌導出**: 支持JSON/TXT格式的請求日誌導出
- **🧪 快速測試**: 內建多種測試網站，一鍵發送測試請求
- **多線程處理**: 高效處理並發請求，不影響目標服務性能

## 📋 系統要求

- **操作系統**: Linux, macOS, Windows
- **Python版本**: Python 3.7+
- **依賴庫**: 
  - tkinter (Python內建)
  - socket (Python內建)
  - threading (Python內建)
  - requests (僅測試腳本需要)

## 🛠️ 安裝和運行

### 1. 克隆項目
```bash
git clone <repository-url>
cd proxy-interceptor
```

### 2. 安裝依賴（可選，僅測試需要）
```bash
pip install requests
```

### 3. 運行程序
```bash
python main.py
```

## 📖 使用說明

### 啟動代理服務器

1. 運行 `python main.py` 啟動程序
2. 在GUI界面中點擊 "啟動代理 (9487)" 按鈕
3. 程序開始監聽127.0.0.1:9487端口

### 配置目標應用

將目標應用的HTTP代理設置為 `127.0.0.1:9487`

#### 常用配置示例：

**curl命令**:
```bash
curl -x 127.0.0.1:9487 http://example.com
```

**Python requests**:
```python
import requests
proxies = {'http': 'http://127.0.0.1:9487'}
response = requests.get('http://example.com', proxies=proxies)
```

**瀏覽器配置**:
- 在瀏覽器網絡設置中配置HTTP代理為 `127.0.0.1:9487`

### 功能操作

#### 代理攔截功能
1. **查看請求**: 在"🔍 代理攔截"標籤頁中查看所有攔截的請求
2. **編輯請求**: 在"編輯與重放"標籤頁中修改請求內容
3. **重放請求**: 點擊"重放請求"按鈕發送修改後的請求
4. **導出日誌**: 點擊"導出日誌"按鈕保存請求記錄
5. **清空記錄**: 點擊"清空請求"按鈕清除所有記錄

#### 內建瀏覽器功能
1. **開啟瀏覽器**: 點擊工具欄中的"🌐 瀏覽器"按鈕或切換到瀏覽器標籤頁
2. **網頁瀏覽**: 在地址欄輸入URL，所有請求自動通過代理
3. **查看源碼**: 在"原始HTML"標籤頁中查看網頁源代碼
4. **外部瀏覽器**: 點擊"外部瀏覽器"按鈕開啟系統瀏覽器並自動配置代理

#### 快速測試功能
1. **一鍵測試**: 點擊工具欄中的"🧪 快速測試"按鈕
2. **預設網站**: 選擇內建的測試網站（httpbin.org、example.com等）
3. **自定義測試**: 輸入任意URL進行測試

## 🧪 測試工具

項目包含測試腳本，用於驗證代理功能：

```bash
python test_proxy.py
```

測試腳本將發送多種類型的HTTP請求，包括：
- GET請求
- POST請求（JSON數據）
- 自定義Headers
- 表單數據
- 連續多請求

## 📁 項目結構

```
proxy-interceptor/
├── main.py                 # 主程序入口
├── proxy_interceptor.py    # HTTP代理攔截器核心
├── gui_interface.py        # GUI界面實現
├── request_replayer.py     # 請求重放模組
├── browser_widget.py       # 內建瀏覽器組件
├── test_proxy.py          # 測試腳本
└── README.md              # 項目說明
```

## 🏗️ 技術架構

### 核心模組

1. **ProxyInterceptor**: HTTP代理服務器
   - 使用socket監聽9487端口
   - 多線程處理客戶端連接
   - 解析並轉發HTTP請求
   - 記錄請求詳情

2. **HTTPRequest**: 請求數據結構
   - 解析HTTP請求格式
   - 提取方法、URL、Headers、Body
   - 格式化顯示功能

3. **ProxyGUI**: 圖形用戶界面
   - 使用tkinter構建GUI
   - 實時顯示攔截請求
   - 提供編輯和重放功能
   - 支持日誌導出

4. **RequestReplayer**: 請求重放器
   - 解析編輯後的請求
   - 發送HTTP請求到目標服務器
   - 分析並顯示響應結果

5. **ProxyBrowser**: 內建瀏覽器
   - 類似Burp Suite的內建瀏覽器界面
   - 自動配置代理設置
   - 簡單HTML渲染和導航功能
   - 支持開啟外部瀏覽器並自動配置代理

### 設計特點

- **異步處理**: 使用多線程確保GUI響應性
- **錯誤處理**: 完善的異常處理機制
- **用戶友好**: 類似專業工具的界面設計
- **擴展性**: 模組化設計，便於功能擴展

## 🔧 高級配置

### 修改監聽端口

在 `proxy_interceptor.py` 中修改默認端口：

```python
# 將 port=9487 改為其他端口
self.proxy = ProxyInterceptor(port=8080)
```

### 自定義超時設置

在 `request_replayer.py` 中調整超時時間：

```python
self.timeout = 30  # 設置為30秒
```

## ⚠️ 注意事項

1. **端口衝突**: 確保9487端口未被其他程序佔用
2. **防火牆設置**: 可能需要配置防火牆允許該端口
3. **HTTPS支持**: 當前版本主要支持HTTP請求
4. **性能考慮**: 大量並發請求時可能影響性能

## 🐛 故障排除

### 常見問題

**問題**: 代理服務器啟動失敗
**解決**: 檢查端口9487是否被佔用，嘗試重啟程序

**問題**: 請求無法攔截
**解決**: 確認目標應用正確配置了代理設置

**問題**: GUI界面卡頓
**解決**: 清空請求記錄，重啟程序

## 📄 許可證

本項目為開源項目，僅供學習和研究使用。

## 🤝 貢獻

歡迎提交Issue和Pull Request來改進這個項目！

## 📞 聯繫方式

如有問題或建議，請通過GitHub Issues與我們聯繫。

---

**免責聲明**: 本工具僅供安全測試和學習用途，請勿用於非法活動。使用者應遵守相關法律法規。 